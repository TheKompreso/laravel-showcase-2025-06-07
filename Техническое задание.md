# Тестовое задание (Backend)

## Описание задачи

Необходимо реализовать REST API, позволяющее пользователям бронировать временные слоты на спортивной площадке. Один заказ может включать несколько слотов. Пользователь проходит аутентификацию по приватному API токену.


## Примеры моделей

| Модель         | Поля                        |
|----------------|-----------------------------|
| **users**      | - id<br>- name<br>- api_token (string, unique)<br>- timestamps |
| **bookings**   | - id<br>- user_id (FK)<br>- timestamps |
| **booking_slots** | - id<br>- booking_id (FK)<br>- start_time (datetime)<br>- end_time (datetime)<br>- timestamps |


## Бизнес-правила и требования к реализации

1. При создании брони пользователь может указать несколько временных слотов.
2. При обновлении бронирования можно:
   - изменить один слот (по `slot_id`);
   - добавить новый слот к уже существующему заказу.
3. Временные слоты не должны пересекаться с другими слотами на той же площадке (в рамках всей системы, не только у текущего пользователя) и внутри одного заказа.
4. Нельзя удалять или обновлять чужие бронирования.


## API

| Метод                                         | Описание                                    |
|-----------------------------------------------|---------------------------------------------|
| `GET /api/bookings`                           | Получить список бронирований пользователя  |
| `POST /api/bookings`                          | Создать бронирование с несколькими слотами |
| `PATCH /api/bookings/{booking}/slots/{slot}` | Обновить конкретный слот                     |
| `POST /api/bookings/{booking}/slots`          | Добавить новый слот к существующему заказу  |
| `DELETE /api/bookings/{booking}`              | Удалить весь заказ                           |

- Формат возвращаемых данных – **JSON**.
- Авторизация по токену: простой `api_token` (без использования Laravel Passport/Sanctum).


## Пример запроса: создание бронирования
```
POST /api/bookings Content-Type: application/json Authorization: Bearer {api_token}

{
  "slots": [
    {
      "start_time": "2025-06-25T12:00:00",
      "end_time": "2025-06-25T13:00:00"
    },
    {
      "start_time": "2025-06-25T13:30:00",
      "end_time": "2025-06-25T14:30:00"
    }
  ]
}
```

## Тесты (минимум)

- Создание бронирования с несколькими слотами.
- Добавление слота с конфликтом (пересечением) – должно возвращать ошибку.
- Обновление слота – успешное и неуспешное.
- Авторизация – запросы без токена должны отклоняться.

## Дополнительно

- Сделать миграции и сиды — создать нескольких пользователей с токенами.
- Валидация пересечения слотов должна работать на уровне всей системы.
